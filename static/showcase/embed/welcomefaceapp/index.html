<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Face Lab - Bulk Enrollment System</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #121212; color: #e0e0e0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        header { background: #1f1f1f; padding: 15px; text-align: center; border-bottom: 2px solid #333; }
        
        .main-container { display: flex; flex: 1; overflow: hidden; }
        .column { padding: 20px; display: flex; flex-direction: column; border-right: 1px solid #333; box-sizing: border-box; }
        
        /* Â∏ÉÂ±ÄÊØî‰æã / Column Ratios */
        .col-left { flex: 1.2; background: #1a1a1a; }
        .col-mid { flex: 1.5; background: #141414; }
        .col-right { flex: 2.3; background: #0a0a0a; border-right: none; }

        h3 { color: #3498db; margin-top: 0; font-size: 1.1em; border-bottom: 1px solid #333; padding-bottom: 10px; }
        
        /* ÂÖ≥ÈîÆÔºöËßÜÈ¢ë‰∏éÁîªÂ∏ÉÁöÑÁªùÂØπÂ†ÜÂè† / Video & Canvas Alignment */
        .video-wrapper { 
            position: relative; 
            width: 100%; 
            background: #000;
            border-radius: 8px; 
            overflow: hidden; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        video { width: 100%; height: auto; display: block; }
        canvas { position: absolute; top: 0; left: 0; }

        /* UI Elements */
        textarea { flex: 1; background: #000; color: #00ff00; font-family: 'Consolas', monospace; padding: 12px; border: 1px solid #444; resize: none; border-radius: 4px; }
        .btn { cursor: pointer; padding: 12px; border: none; border-radius: 4px; font-weight: bold; margin-top: 10px; transition: 0.2s; }
        .btn-save { background: #27ae60; color: white; }
        .btn-clear { background: #c0392b; color: white; margin-left: 10px; }
        
        #preview-thumbs { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 8px; margin-top: 15px; overflow-y: auto; max-height: 200px; }
        .thumb { width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 4px; border: 1px solid #444; }
        
        #status-bar { background: #2980b9; padding: 8px 20px; font-size: 0.85em; }
        .welcome-log { margin-top: 15px; font-size: 1.2em; color: #f1c40f; min-height: 1.5em; text-align: center; }
    </style>
</head>
<body>

<header>
    <h2 style="margin:0">Classroom Face Recognition Lab <span style="font-weight:normal; font-size:0.6em; opacity:0.7;">(Integrated Console)</span></h2>
</header>
<div id="status-bar">Status: Initializing AI Models...</div>

<div class="main-container">
    <div class="column col-left">
        <h3>1. Bulk Enrollment</h3>
        <p style="font-size: 0.8em; color: #888;">Filename should be: <b>Name.jpg</b> or <b>Name_1.jpg</b></p>
        <div style="border: 2px dashed #444; padding: 30px; text-align: center; cursor: pointer;" onclick="document.getElementById('imageUpload').click()">
            <input type="file" id="imageUpload" accept="image/*" multiple style="display:none">
            <span style="font-size: 2em;">üìÅ</span>
            <p>Click to upload student photos</p>
        </div>
        <div id="preview-thumbs"></div>
    </div>

    <div class="column col-mid">
        <h3>2. Live JSON Database</h3>
        <textarea id="dataEditor" spellcheck="false"></textarea>
        <div style="display:flex">
            <button class="btn btn-save" style="flex:2" onclick="saveAndReload()">Apply & Restart System</button>
            <button class="btn btn-clear" style="flex:1" onclick="clearData()">Clear All</button>
        </div>
    </div>

    <div class="column col-right">
        <h3>3. Recognition Engine</h3>
        <div class="video-wrapper" id="videoWrapper">
            <video id="video" autoplay muted playsinline></video>
        </div>
        <div class="welcome-log" id="welcomeLog">Waiting for recognition...</div>
    </div>
</div>

<script src="js/face-api.min.js"></script>
<script src="script.js"></script>
</body>
</html>